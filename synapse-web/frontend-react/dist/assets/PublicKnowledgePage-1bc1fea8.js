import{j as e,L as h}from"./index-d3d76560.js";import{r as a}from"./vendor-d6de9d8b.js";import{M as u}from"./MagnifyingGlassIcon-c4ee28a5.js";import{C as p}from"./CheckCircleIcon-27af60e8.js";import"./router-41a8dd64.js";function b({title:r,titleId:t,...d},l){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},d),r?a.createElement("title",{id:t},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"}))}const f=a.forwardRef(b),w=f,j={critical:"bg-red-100 text-red-800 border-red-300",high:"bg-orange-100 text-orange-800 border-orange-300",medium:"bg-yellow-100 text-yellow-800 border-yellow-300",low:"bg-blue-100 text-blue-800 border-blue-300"};function E(){const[r,t]=a.useState([]),[d,l]=a.useState(!0),[o,c]=a.useState(""),[i,g]=a.useState(null);a.useEffect(()=>{m()},[o]);const m=async()=>{try{l(!0);const s=new URLSearchParams;o&&s.append("search",o);const n=await fetch(`/api/knowledge/public?${s}`);if(!n.ok)throw new Error("Failed to fetch knowledge base");const x=await n.json();t(x)}catch(s){console.error("Error fetching knowledge:",s)}finally{l(!1)}};return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(w,{className:"h-8 w-8 text-blue-600"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Public Knowledge Base"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Community-shared solutions for common problems"})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(u,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"search",placeholder:"Search solutions...",value:o,onChange:s=>c(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"})]})}),d?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(h,{size:"lg"})}):r.length===0?e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-8 text-center",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No public knowledge entries found."})}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:r.map(s=>e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex-1",children:s.title}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${j[s.severity]}`,children:s.severity.toUpperCase()})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4",children:s.problem_description}),e.jsxs("details",{open:i===s.id,onToggle:()=>g(i===s.id?null:s.id),className:"mb-4",children:[e.jsx("summary",{className:"cursor-pointer text-blue-600 dark:text-blue-400 font-medium text-sm hover:text-blue-700 dark:hover:text-blue-300",children:"View Solution"}),e.jsx("div",{className:"mt-3 bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:e.jsx("pre",{className:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap font-sans",children:s.solution})})]}),e.jsx("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400 border-t border-gray-200 dark:border-gray-700 pt-3",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(p,{className:"h-4 w-4"}),"Used ",s.usage_count," times"]}),s.tags&&e.jsxs("span",{className:"flex items-center gap-1",children:["Tags: ",s.tags]})]})})]})},s.id))})]})}export{E as default};
