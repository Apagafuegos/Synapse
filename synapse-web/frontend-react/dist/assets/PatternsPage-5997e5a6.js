import{j as e,L as b}from"./index-90817e89.js";import{r as t}from"./vendor-d6de9d8b.js";import{b as j}from"./router-41a8dd64.js";import{M as v}from"./MagnifyingGlassIcon-c4ee28a5.js";function w({title:a,titleId:s,...n},d){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":s},n),a?t.createElement("title",{id:s},a):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}const N=t.forwardRef(w),u=N,k={critical:"bg-red-100 text-red-800 border-red-300",high:"bg-orange-100 text-orange-800 border-orange-300",medium:"bg-yellow-100 text-yellow-800 border-yellow-300",low:"bg-blue-100 text-blue-800 border-blue-300"},C={code:"bg-purple-100 text-purple-800",infrastructure:"bg-green-100 text-green-800",configuration:"bg-indigo-100 text-indigo-800",external:"bg-pink-100 text-pink-800"};function P(){const{projectId:a}=j(),[s,n]=t.useState([]),[d,c]=t.useState(!0),[l,h]=t.useState("all"),[o,m]=t.useState("all"),[i,p]=t.useState("");t.useEffect(()=>{y()},[a,l,o]);const y=async()=>{try{c(!0);const r=new URLSearchParams;l!=="all"&&r.append("category",l),o!=="all"&&r.append("severity",o);const x=await fetch(`/api/projects/${a}/patterns?${r}`);if(!x.ok)throw new Error("Failed to fetch patterns");const f=await x.json();n(f)}catch(r){console.error("Error fetching patterns:",r)}finally{c(!1)}},g=s.filter(r=>i===""||r.pattern.toLowerCase().includes(i.toLowerCase())||r.description?.toLowerCase().includes(i.toLowerCase()));return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Error Patterns"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Recurring error patterns detected across your project"})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(v,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search patterns...",value:i,onChange:r=>p(r.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(u,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsxs("select",{value:l,onChange:r=>h(r.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Categories"}),e.jsx("option",{value:"code",children:"Code Errors"}),e.jsx("option",{value:"infrastructure",children:"Infrastructure"}),e.jsx("option",{value:"configuration",children:"Configuration"}),e.jsx("option",{value:"external",children:"External Services"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(u,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsxs("select",{value:o,onChange:r=>m(r.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Severities"}),e.jsx("option",{value:"critical",children:"Critical"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"low",children:"Low"})]})]})]})}),d?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(b,{size:"lg"})}):g.length===0?e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-8 text-center",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No patterns found matching your filters."})}):e.jsx("div",{className:"grid grid-cols-1 gap-4",children:g.map(r=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${C[r.category]||"bg-gray-100 text-gray-800"}`,children:r.category}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${k[r.severity]}`,children:r.severity.toUpperCase()})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:r.pattern}),r.description&&e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-2",children:r.description})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.frequency}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"occurrences"})]})]}),r.example_lines&&e.jsxs("div",{className:"mt-4 bg-gray-50 dark:bg-gray-900 rounded p-3",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Example:"}),e.jsx("code",{className:"text-xs text-gray-700 dark:text-gray-300 font-mono",children:r.example_lines})]})]},r.id))})]})}export{P as default};
